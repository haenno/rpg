{% extends 'base.html' %}
{% block content %} 
{% if error %}
{{ error }}

<br />
<br />
{% endif %}

{% if user.is_authenticated %}

<div class="container text-center">
<table width="100%">
    <tr>
        <td>

        {% if chars %} 

        <div class="table-responsive">
        <table class="table table-bordered table-striped">
        
        <tr>
        {% for char in chars %}
        
            <td>
            <p>
            <b>{{ char.name }}</b> <br />
            Klasse:
            <div style=" font-size: 30px;font-size: 4vw;">
                {% if char.Klasse == "W" %} 🤺 {% endif %}
                {% if char.Klasse == "M" %} 🧙 {% endif %}
                {% if char.Klasse == "P" %} 👼 {% endif %} 
            </div>
            <br />
            <br />
            Lebenspunkte: {{ char.hp }} <br />
            Angriffskraft:  {{ char.ap }} <br />
            <br />
            <!--Geburtsort: {{ char.Geburtsort }} <br /> 
            Geschlecht: {{ char.Geschlecht }} <br />
            <br />--> 
            Verfügbare XP: {{ char.xp_to_spend }} <br />
            {% if char.xp_to_spend >= 1 %} <br />
            <a href="/xp-to-hp-{{char.id}}/">Lebenspunkte erhöhen</a> (1 XP = {{ xp_hp }} HP) <br />
            <a href="/xp-to-ap-{{char.id}}/">Angriffskraft erhöhen</a>  (1 XP = {{ xp_ap }} AP)
            {% endif %}
     
            
            </p>
        
            </td>
        
        {% endfor %}

        
        </tr>

        </table>
        </div>

{% endif %}

{% if active_char %}

<!-- (TODO!) Wiedereinstieg in Game-Sitzung einbauen anstatt rauswurf -->
<p>
<b>Achtung!</b><br />
Du hast noch eine aktive Chars oder Szene. Bitte setze diese erst zurück &#10145; <a href="{% url 'chars' %}">Aktive Chars und Szenen zurücksetzen...</a><br />
</p>

{% else %}

{% if chars %}

<form action="{% url 'worldmap' %}" method="POST" id="interest-select" class="form-inline">
 <div class="form-group">
        {% csrf_token %}
        <h4>Wähle einen Charakter aus, um die Weltkarte zu betreten...</h4>

        <select id="char_id" name="char" class="form-control">
        <!--<option disabled selected> Charakter auswählen... </option>--> <!-- muss noch raus solange er ohne auswahl das form absendet -->
        {% for char in chars %}
            <option value={{char.id}}>{{char.name}}</option>
        {% endfor %}
        </select> 
         <input class="btn btn-primary" type="submit" value="&#10145; Welt betreten! "/>
         </div>
  </form>

        {% else %}
        <h2>Du hast noch keine Charaktere...</h2>

        Lege hier einen neuen an 👍
        {% endif %}
  {% endif %}



        </td>
    </tr>
</table>
<br />
<br />
<table width="100%">
    <tr>
        <td>
            <h3>Neuen Charakter anlegen:</h3>
            
            <form method="POST">
                {{ form.as_p }}
                {% csrf_token %}
                <input type="submit" value="Charakter anlegen" class="btn btn-primary" >
            </form>
        </td>

</tr>
</table>



</div>


{% else %}
<p>Hi! Wenn du spielen willst, log dich bitte erst ein. </p>
{% endif %} 

{% endblock %}
